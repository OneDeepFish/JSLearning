ameters[e]),u.length))break}k=getHostName(configReferrerUrl),l=i.length?getHostName(i):"",!k.length||isSiteHostName(k)||configConversionAttributionFirstReferrer&&l.length&&!isSiteHostName(l)||(i=configReferrerUrl),(i.length||t.length)&&(h=g,r=[t,u,h,purify(i.slice(0,j))],setCookie(o,JSON2.stringify(r),configReferralCookieTimeout,configCookiePath,configCookieDomain))}a+="&idsite="+configTrackerSiteId+"&rec=1"+"&r="+String(Math.random()).slice(2,8)+"&Y="+f.getFullYear()+"&M="+(f.getMonth()+1)+"&D="+f.getDate()+"&h="+f.getHours()+"&m="+f.getMinutes()+"&s="+f.getSeconds()+"&url="+encodeWrapper(purify(s))+(configReferrerUrl.length?"&urlref="+encodeWrapper(purify(configReferrerUrl)):"")+(configUserId&&configUserId.length?"&uid="+encodeWrapper(configUserId):"")+"&_id="+v.uuid+"&_idts="+v.createTs+"&_idvc="+v.visitCount+"&_idn="+v.newVisitor+(t.length?"&_rcn="+encodeWrapper(t):"")+(u.length?"&_rck="+encodeWrapper(u):"")+"&_refts="+h+"&_viewts="+v.lastVisitTs+(String(v.lastEcommerceOrderTs).length?"&_ects="+v.lastEcommerceOrderTs:"")+(String(i).length?"&_ref="+encodeWrapper(purify(i.slice(0,j))):"")+(w?"&cs="+encodeWrapper(w):"")+"&send_image=0";for(e in browserFeatures)Object.prototype.hasOwnProperty.call(browserFeatures,e)&&(a+="&"+e+"="+browserFeatures[e]);if(y=[],b)for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&/^dimension\d+$/.test(e)&&(z=e.replace("dimension",""),y.push(parseInt(z,10)),y.push(String(z)),a+="&"+e+"="+b[e],delete b[e]);b&&isObjectEmpty(b)&&(b=null);for(e in customDimensions)Object.prototype.hasOwnProperty.call(customDimensions,e)&&(A=-1===indexOfArray(y,e),A&&(a+="&dimension"+e+"="+customDimensions[e]));if(b?a+="&data="+encodeWrapper(JSON2.stringify(b)):configCustomData&&(a+="&data="+encodeWrapper(JSON2.stringify(configCustomData))),C=sortObjectByKeys(customVariablesPage),D=sortObjectByKeys(customVariablesEvent),a+=B(C,"cvar"),a+=B(D,"e_cvar"),customVariables){a+=B(customVariables,"_cvar");for(e in m)Object.prototype.hasOwnProperty.call(m,e)&&(""===customVariables[e][0]||""===customVariables[e][1])&&delete customVariables[e];configStoreCustomVariablesInCookie&&setCookie(p,JSON2.stringify(customVariables),configSessionCookieTimeout,configCookiePath,configCookieDomain)}return configPerformanceTrackingEnabled&&(configPerformanceGenerationTime?a+="&gt_ms="+configPerformanceGenerationTime:performanceAlias&&performanceAlias.timing&&performanceAlias.timing.requestStart&&performanceAlias.timing.responseEnd&&(a+="&gt_ms="+(performanceAlias.timing.responseEnd-performanceAlias.timing.requestStart))),v.lastEcommerceOrderTs=isDefined(d)&&String(d).length?d:v.lastEcommerceOrderTs,setVisitorIdCookie(v),setSessionCookie(),a+=executePluginMethod(c),configAppendToTrackingUrl.length&&(a+="&"+configAppendToTrackingUrl),isFunction(configCustomRequestContentProcessing)&&(a=configCustomRequestContentProcessing(a)),a}function logEcommerce(a,b,c,d,e,f){var h,k,g="idgoal=0",i=new Date,j=[],l=String(a).length;if(l&&(g+="&ec_id="+encodeWrapper(a),h=Math.round(i.getTime()/1e3)),g+="&revenue="+b,String(c).length&&(g+="&ec_st="+c),String(d).length&&(g+="&ec_tx="+d),String(e).length&&(g+="&ec_sh="+e),String(f).length&&(g+="&ec_dt="+f),ecommerceItems){for(k in ecommerceItems)Object.prototype.hasOwnProperty.call(ecommerceItems,k)&&(isDefined(ecommerceItems[k][1])||(ecommerceItems[k][1]=""),isDefined(ecommerceItems[k][2])||(ecommerceItems[k][2]=""),isDefined(ecommerceItems[k][3])&&0!==String(ecommerceItems[k][3]).length||(ecommerceItems[k][3]=0),isDefined(ecommerceItems[k][4])&&0!==String(ecommerceItems[k][4]).length||(ecommerceItems[k][4]=1),j.push(ecommerceItems[k]));g+="&ec_items="+encodeWrapper(JSON2.stringify(j))}g=getRequest(g,configCustomData,"ecommerce",h),sendRequest(g,configTrackerPause),l&&(ecommerceItems={})}function logEcommerceOrder(a,b,c,d,e,f){String(a).length&&isDefined(b)&&logEcommerce(a,b,c,d,e,f)}function logEcommerceCartUpdate(a){isDefined(a)&&logEcommerce("",a,"","","","")}function logPageView(a,b,c){var d=getRequest("action_name="+encodeWrapper(titleFixup(a||configTitle)),b,"log");sendRequest